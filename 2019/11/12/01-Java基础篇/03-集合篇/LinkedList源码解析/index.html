<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><title>LinkedList源码解析 | Eric Liang</title><meta name="description" content="LinkedList源码解析"><meta name="keywords" content="集合,LinkedList"><meta name="author" content="Eric Liang"><meta name="copyright" content="Eric Liang"><meta name="format-detection" content="telephone=no"><link rel="shortcut icon" href="/img/favicon.ico"><link rel="preconnect" href="//cdn.jsdelivr.net"><meta name="twitter:card" content="summary_large_image"><meta name="twitter:title" content="LinkedList源码解析"><meta name="twitter:description" content="LinkedList源码解析"><meta name="twitter:image" content="https://source.unsplash.com/300x300/?document"><meta property="og:type" content="article"><meta property="og:title" content="LinkedList源码解析"><meta property="og:url" content="https://ericql.github.io/2019/11/12/01-Java%E5%9F%BA%E7%A1%80%E7%AF%87/03-%E9%9B%86%E5%90%88%E7%AF%87/LinkedList%E6%BA%90%E7%A0%81%E8%A7%A3%E6%9E%90/"><meta property="og:site_name" content="Eric Liang"><meta property="og:description" content="LinkedList源码解析"><meta property="og:image" content="https://source.unsplash.com/300x300/?document"><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><script src="https://cdn.jsdelivr.net/npm/js-cookie/dist/js.cookie.min.js"></script><script>const autoChangeMode = 'false'
var t = Cookies.get("theme");
if (autoChangeMode == '1'){
const isDarkMode = window.matchMedia("(prefers-color-scheme: dark)").matches
const isLightMode = window.matchMedia("(prefers-color-scheme: light)").matches
const isNotSpecified = window.matchMedia("(prefers-color-scheme: no-preference)").matches
const hasNoSupport = !isDarkMode && !isLightMode && !isNotSpecified

if (t === undefined){
  if (isLightMode) activateLightMode()
  else if (isDarkMode) activateDarkMode()
  else if (isNotSpecified || hasNoSupport){
    console.log('You specified no preference for a color scheme or your browser does not support it. I Schedule dark mode during night time.')
    now = new Date();
    hour = now.getHours();
    isNight = hour < 6 || hour >= 18
    isNight ? activateDarkMode() : activateLightMode()
}
} else if (t == 'light') activateLightMode()
else activateDarkMode()


} else if (autoChangeMode == '2'){
  now = new Date();
  hour = now.getHours();
  isNight = hour < 6 || hour >= 18
  if(t === undefined) isNight? activateDarkMode() : activateLightMode()
  else if (t === 'light') activateLightMode()
  else activateDarkMode() 
} else {
  if ( t == 'dark' ) activateDarkMode()
  else if ( t == 'light') activateLightMode()
}

function activateDarkMode(){
  document.documentElement.setAttribute('data-theme', 'dark')
  if (document.querySelector('meta[name="theme-color"]') !== null){
    document.querySelector('meta[name="theme-color"]').setAttribute('content','#000')
  }
}
function activateLightMode(){
  document.documentElement.setAttribute('data-theme', 'light')
  if (document.querySelector('meta[name="theme-color"]') !== null){
  document.querySelector('meta[name="theme-color"]').setAttribute('content','#fff')
  }
}</script><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/font-awesome@latest/css/font-awesome.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.css"><link rel="canonical" href="https://ericql.github.io/2019/11/12/01-Java%E5%9F%BA%E7%A1%80%E7%AF%87/03-%E9%9B%86%E5%90%88%E7%AF%87/LinkedList%E6%BA%90%E7%A0%81%E8%A7%A3%E6%9E%90/"><link rel="prev" title="ThreadLocal示例与原理" href="https://ericql.github.io/2019/11/12/01-Java%E5%9F%BA%E7%A1%80%E7%AF%87/01-%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86%E7%82%B9/ThreadLocal/ThreadLocal%E7%A4%BA%E4%BE%8B%E4%B8%8E%E5%8E%9F%E7%90%86/"><link rel="next" title="TreeMap源码解析" href="https://ericql.github.io/2019/11/12/01-Java%E5%9F%BA%E7%A1%80%E7%AF%87/03-%E9%9B%86%E5%90%88%E7%AF%87/TreeMap%E6%BA%90%E7%A0%81%E8%A7%A3%E6%9E%90/"><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Titillium+Web"><script>var GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  translate: {"defaultEncoding":2,"translateDelay":0,"cookieDomain":"https://xxx/","msgToTraditionalChinese":"繁","msgToSimplifiedChinese":"简"},
  highlight_copy: 'false',
  highlight_lang: 'true',
  highlight_shrink: 'false',
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  bookmark: {
    title: 'Snackbar.bookmark.title',
    message_prev: '按',
    message_next: '键将本页加入书签'
  },
  runtime_unit: '天',
  copyright: undefined,
  copy_copyright_js: false,
  ClickShowText: undefined,
  medium_zoom: 'false',
  Snackbar: undefined
  
}</script></head><body><div id="header"> <div id="page-header"><span class="pull_left" id="blog_name"><a class="blog_title" id="site-name" href="/">Eric Liang</a></span><i class="fa fa-bars fa-fw toggle-menu pull_right close" aria-hidden="true"></i><span class="pull_right menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fa fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fa fa-archive"></i><span> 档案</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fa fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fa fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fa fa-link"></i><span> 友链</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fa fa-heart"></i><span> 关于</span></a></div><div class="menus_item"><a class="site-page"><i class="fa-fw fa fa-list" aria-hidden="true"></i><span> 列表</span><i class="fa fa-chevron-down menus-expand" aria-hidden="true"></i></a><ul class="menus_item_child"><li><a class="site-page" href="/music/"><i class="fa-fw fa fa-music"></i><span> 音乐</span></a></li><li><a class="site-page" href="/movies/"><i class="fa-fw fa fa-film"></i><span> 电影</span></a></li></ul></div></div></span><span class="pull_right" id="search_button"></span></div></div><div id="mobile-sidebar"><div id="menu_mask"></div><div id="mobile-sidebar-menus"><div class="mobile_author_icon"><img class="lazyload avatar_img" src="https://cdn.jsdelivr.net/gh/jerryc127/CDN@latest/Photo/avatar.png" onerror="onerror=null;src='/img/friend_404.gif'"></div><div class="mobile_post_data"><div class="mobile_data_item is_center"><div class="mobile_data_link"><a href="/archives/"><div class="headline">文章</div><div class="length_num">43</div></a></div></div><div class="mobile_data_item is_center">      <div class="mobile_data_link"><a href="/tags/"><div class="headline">标签</div><div class="length_num">17</div></a></div></div><div class="mobile_data_item is_center">     <div class="mobile_data_link"><a href="/categories/"><div class="headline">分类</div><div class="length_num">8</div></a></div></div></div><hr><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fa fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fa fa-archive"></i><span> 档案</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fa fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fa fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fa fa-link"></i><span> 友链</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fa fa-heart"></i><span> 关于</span></a></div><div class="menus_item"><a class="site-page"><i class="fa-fw fa fa-list" aria-hidden="true"></i><span> 列表</span><i class="fa fa-chevron-down menus-expand" aria-hidden="true"></i></a><ul class="menus_item_child"><li><a class="site-page" href="/music/"><i class="fa-fw fa fa-music"></i><span> 音乐</span></a></li><li><a class="site-page" href="/movies/"><i class="fa-fw fa fa-film"></i><span> 电影</span></a></li></ul></div></div></div><div id="mobile-sidebar-toc"><div class="toc_mobile_headline">目录</div><ol class="toc_mobile_items"><li class="toc_mobile_items-item toc_mobile_items-level-1"><a class="toc_mobile_items-link" href="#LinkedList源码解析"><span class="toc_mobile_items-number">1.</span> <span class="toc_mobile_items-text">LinkedList源码解析</span></a><ol class="toc_mobile_items-child"><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#一、LinkedList数据结构"><span class="toc_mobile_items-number">1.1.</span> <span class="toc_mobile_items-text">一、LinkedList数据结构</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#二、LinkedList类定义"><span class="toc_mobile_items-number">1.2.</span> <span class="toc_mobile_items-text">二、LinkedList类定义</span></a><ol class="toc_mobile_items-child"><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#1-为什么要继承AbstractSequentialList"><span class="toc_mobile_items-number">1.2.1.</span> <span class="toc_mobile_items-text">1.为什么要继承AbstractSequentialList</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#2-LinkedList的类图关系"><span class="toc_mobile_items-number">1.2.2.</span> <span class="toc_mobile_items-text">2.LinkedList的类图关系</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#3-不同步"><span class="toc_mobile_items-number">1.2.3.</span> <span class="toc_mobile_items-text">3.不同步</span></a></li></ol></li><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#三、LinkedList属性"><span class="toc_mobile_items-number">1.3.</span> <span class="toc_mobile_items-text">三、LinkedList属性</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#四、LinkedList构造函数"><span class="toc_mobile_items-number">1.4.</span> <span class="toc_mobile_items-text">四、LinkedList构造函数</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#五、核心函数分析"><span class="toc_mobile_items-number">1.5.</span> <span class="toc_mobile_items-text">五、核心函数分析</span></a><ol class="toc_mobile_items-child"><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#1-添加元素"><span class="toc_mobile_items-number">1.5.1.</span> <span class="toc_mobile_items-text">1.添加元素</span></a><ol class="toc_mobile_items-child"><li class="toc_mobile_items-item toc_mobile_items-level-4"><a class="toc_mobile_items-link" href="#1-1addFirst"><span class="toc_mobile_items-number">1.5.1.1.</span> <span class="toc_mobile_items-text">1.1addFirst</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-4"><a class="toc_mobile_items-link" href="#1-2addLast"><span class="toc_mobile_items-number">1.5.1.2.</span> <span class="toc_mobile_items-text">1.2addLast</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-4"><a class="toc_mobile_items-link" href="#1-3add"><span class="toc_mobile_items-number">1.5.1.3.</span> <span class="toc_mobile_items-text">1.3add</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-4"><a class="toc_mobile_items-link" href="#1-4addAll"><span class="toc_mobile_items-number">1.5.1.4.</span> <span class="toc_mobile_items-text">1.4addAll</span></a><ol class="toc_mobile_items-child"><li class="toc_mobile_items-item toc_mobile_items-level-5"><a class="toc_mobile_items-link" href="#1-4-1对addAll函数的思考"><span class="toc_mobile_items-number">1.5.1.4.1.</span> <span class="toc_mobile_items-text">1.4.1对addAll函数的思考</span></a></li></ol></li></ol></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#2-删除元素"><span class="toc_mobile_items-number">1.5.2.</span> <span class="toc_mobile_items-text">2.删除元素</span></a><ol class="toc_mobile_items-child"><li class="toc_mobile_items-item toc_mobile_items-level-4"><a class="toc_mobile_items-link" href="#2-1removeFirst"><span class="toc_mobile_items-number">1.5.2.1.</span> <span class="toc_mobile_items-text">2.1removeFirst</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-4"><a class="toc_mobile_items-link" href="#2-2removeLast"><span class="toc_mobile_items-number">1.5.2.2.</span> <span class="toc_mobile_items-text">2.2removeLast</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-4"><a class="toc_mobile_items-link" href="#2-3remove"><span class="toc_mobile_items-number">1.5.2.3.</span> <span class="toc_mobile_items-text">2.3remove</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-4"><a class="toc_mobile_items-link" href="#2-4clear"><span class="toc_mobile_items-number">1.5.2.4.</span> <span class="toc_mobile_items-text">2.4clear</span></a></li></ol></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#3-修改元素"><span class="toc_mobile_items-number">1.5.3.</span> <span class="toc_mobile_items-text">3.修改元素</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#4-查找元素"><span class="toc_mobile_items-number">1.5.4.</span> <span class="toc_mobile_items-text">4.查找元素</span></a><ol class="toc_mobile_items-child"><li class="toc_mobile_items-item toc_mobile_items-level-4"><a class="toc_mobile_items-link" href="#4-1getFirst"><span class="toc_mobile_items-number">1.5.4.1.</span> <span class="toc_mobile_items-text">4.1getFirst</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-4"><a class="toc_mobile_items-link" href="#4-2getLast"><span class="toc_mobile_items-number">1.5.4.2.</span> <span class="toc_mobile_items-text">4.2getLast</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-4"><a class="toc_mobile_items-link" href="#4-3get"><span class="toc_mobile_items-number">1.5.4.3.</span> <span class="toc_mobile_items-text">4.3get</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-4"><a class="toc_mobile_items-link" href="#4-4contains"><span class="toc_mobile_items-number">1.5.4.4.</span> <span class="toc_mobile_items-text">4.4contains</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-4"><a class="toc_mobile_items-link" href="#4-5indexOf"><span class="toc_mobile_items-number">1.5.4.5.</span> <span class="toc_mobile_items-text">4.5indexOf</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-4"><a class="toc_mobile_items-link" href="#4-6lastIndexOf"><span class="toc_mobile_items-number">1.5.4.6.</span> <span class="toc_mobile_items-text">4.6lastIndexOf</span></a></li></ol></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#5-node随机访问函数"><span class="toc_mobile_items-number">1.5.5.</span> <span class="toc_mobile_items-text">5.node随机访问函数</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#6-其他public方法"><span class="toc_mobile_items-number">1.5.6.</span> <span class="toc_mobile_items-text">6.其他public方法</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#7-Queue队列操作"><span class="toc_mobile_items-number">1.5.7.</span> <span class="toc_mobile_items-text">7.Queue队列操作</span></a><ol class="toc_mobile_items-child"><li class="toc_mobile_items-item toc_mobile_items-level-4"><a class="toc_mobile_items-link" href="#7-1peek"><span class="toc_mobile_items-number">1.5.7.1.</span> <span class="toc_mobile_items-text">7.1peek</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-4"><a class="toc_mobile_items-link" href="#7-2element"><span class="toc_mobile_items-number">1.5.7.2.</span> <span class="toc_mobile_items-text">7.2element</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-4"><a class="toc_mobile_items-link" href="#7-3poll"><span class="toc_mobile_items-number">1.5.7.3.</span> <span class="toc_mobile_items-text">7.3poll</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-4"><a class="toc_mobile_items-link" href="#7-4remove"><span class="toc_mobile_items-number">1.5.7.4.</span> <span class="toc_mobile_items-text">7.4remove</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-4"><a class="toc_mobile_items-link" href="#7-5offer"><span class="toc_mobile_items-number">1.5.7.5.</span> <span class="toc_mobile_items-text">7.5offer</span></a></li></ol></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#8-Deque双端队列操作"><span class="toc_mobile_items-number">1.5.8.</span> <span class="toc_mobile_items-text">8.Deque双端队列操作</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#9-栈操作"><span class="toc_mobile_items-number">1.5.9.</span> <span class="toc_mobile_items-text">9.栈操作</span></a></li></ol></li><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#六、LinkedList的遍历"><span class="toc_mobile_items-number">1.6.</span> <span class="toc_mobile_items-text">六、LinkedList的遍历</span></a><ol class="toc_mobile_items-child"><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#1-迭代器Iterator遍历"><span class="toc_mobile_items-number">1.6.1.</span> <span class="toc_mobile_items-text">1.迭代器Iterator遍历</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#2-迭代器ListIterator遍历"><span class="toc_mobile_items-number">1.6.2.</span> <span class="toc_mobile_items-text">2.迭代器ListIterator遍历</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#3-foreach循环遍历"><span class="toc_mobile_items-number">1.6.3.</span> <span class="toc_mobile_items-text">3.foreach循环遍历</span></a></li></ol></li><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#七、LinkedList内部类"><span class="toc_mobile_items-number">1.7.</span> <span class="toc_mobile_items-text">七、LinkedList内部类</span></a><ol class="toc_mobile_items-child"><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#1-ListItr内部类"><span class="toc_mobile_items-number">1.7.1.</span> <span class="toc_mobile_items-text">1.ListItr内部类</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#2-Node内部类"><span class="toc_mobile_items-number">1.7.2.</span> <span class="toc_mobile_items-text">2.Node内部类</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#3-DescendingIterator降序迭代器"><span class="toc_mobile_items-number">1.7.3.</span> <span class="toc_mobile_items-text">3.DescendingIterator降序迭代器</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#4-LLSpliterator分割器"><span class="toc_mobile_items-number">1.7.4.</span> <span class="toc_mobile_items-text">4.LLSpliterator分割器</span></a></li></ol></li></ol></li></ol></div></div><div id="body-wrap"><i class="fa fa-arrow-right" id="toggle-sidebar" aria-hidden="true">     </i><div class="auto_open" id="sidebar"><div class="sidebar-toc"><div class="sidebar-toc__title">目录</div><div class="sidebar-toc__progress"><span class="progress-notice">你已经读了</span><span class="progress-num">0</span><span class="progress-percentage">%</span><div class="sidebar-toc__progress-bar">     </div></div><div class="sidebar-toc__content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#LinkedList源码解析"><span class="toc-number">1.</span> <span class="toc-text">LinkedList源码解析</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#一、LinkedList数据结构"><span class="toc-number">1.1.</span> <span class="toc-text">一、LinkedList数据结构</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#二、LinkedList类定义"><span class="toc-number">1.2.</span> <span class="toc-text">二、LinkedList类定义</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-为什么要继承AbstractSequentialList"><span class="toc-number">1.2.1.</span> <span class="toc-text">1.为什么要继承AbstractSequentialList</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-LinkedList的类图关系"><span class="toc-number">1.2.2.</span> <span class="toc-text">2.LinkedList的类图关系</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-不同步"><span class="toc-number">1.2.3.</span> <span class="toc-text">3.不同步</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#三、LinkedList属性"><span class="toc-number">1.3.</span> <span class="toc-text">三、LinkedList属性</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#四、LinkedList构造函数"><span class="toc-number">1.4.</span> <span class="toc-text">四、LinkedList构造函数</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#五、核心函数分析"><span class="toc-number">1.5.</span> <span class="toc-text">五、核心函数分析</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-添加元素"><span class="toc-number">1.5.1.</span> <span class="toc-text">1.添加元素</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-1addFirst"><span class="toc-number">1.5.1.1.</span> <span class="toc-text">1.1addFirst</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#1-2addLast"><span class="toc-number">1.5.1.2.</span> <span class="toc-text">1.2addLast</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#1-3add"><span class="toc-number">1.5.1.3.</span> <span class="toc-text">1.3add</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#1-4addAll"><span class="toc-number">1.5.1.4.</span> <span class="toc-text">1.4addAll</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#1-4-1对addAll函数的思考"><span class="toc-number">1.5.1.4.1.</span> <span class="toc-text">1.4.1对addAll函数的思考</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-删除元素"><span class="toc-number">1.5.2.</span> <span class="toc-text">2.删除元素</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#2-1removeFirst"><span class="toc-number">1.5.2.1.</span> <span class="toc-text">2.1removeFirst</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-2removeLast"><span class="toc-number">1.5.2.2.</span> <span class="toc-text">2.2removeLast</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-3remove"><span class="toc-number">1.5.2.3.</span> <span class="toc-text">2.3remove</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-4clear"><span class="toc-number">1.5.2.4.</span> <span class="toc-text">2.4clear</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-修改元素"><span class="toc-number">1.5.3.</span> <span class="toc-text">3.修改元素</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-查找元素"><span class="toc-number">1.5.4.</span> <span class="toc-text">4.查找元素</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#4-1getFirst"><span class="toc-number">1.5.4.1.</span> <span class="toc-text">4.1getFirst</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-2getLast"><span class="toc-number">1.5.4.2.</span> <span class="toc-text">4.2getLast</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-3get"><span class="toc-number">1.5.4.3.</span> <span class="toc-text">4.3get</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-4contains"><span class="toc-number">1.5.4.4.</span> <span class="toc-text">4.4contains</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-5indexOf"><span class="toc-number">1.5.4.5.</span> <span class="toc-text">4.5indexOf</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-6lastIndexOf"><span class="toc-number">1.5.4.6.</span> <span class="toc-text">4.6lastIndexOf</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-node随机访问函数"><span class="toc-number">1.5.5.</span> <span class="toc-text">5.node随机访问函数</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-其他public方法"><span class="toc-number">1.5.6.</span> <span class="toc-text">6.其他public方法</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7-Queue队列操作"><span class="toc-number">1.5.7.</span> <span class="toc-text">7.Queue队列操作</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#7-1peek"><span class="toc-number">1.5.7.1.</span> <span class="toc-text">7.1peek</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#7-2element"><span class="toc-number">1.5.7.2.</span> <span class="toc-text">7.2element</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#7-3poll"><span class="toc-number">1.5.7.3.</span> <span class="toc-text">7.3poll</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#7-4remove"><span class="toc-number">1.5.7.4.</span> <span class="toc-text">7.4remove</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#7-5offer"><span class="toc-number">1.5.7.5.</span> <span class="toc-text">7.5offer</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#8-Deque双端队列操作"><span class="toc-number">1.5.8.</span> <span class="toc-text">8.Deque双端队列操作</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#9-栈操作"><span class="toc-number">1.5.9.</span> <span class="toc-text">9.栈操作</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#六、LinkedList的遍历"><span class="toc-number">1.6.</span> <span class="toc-text">六、LinkedList的遍历</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-迭代器Iterator遍历"><span class="toc-number">1.6.1.</span> <span class="toc-text">1.迭代器Iterator遍历</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-迭代器ListIterator遍历"><span class="toc-number">1.6.2.</span> <span class="toc-text">2.迭代器ListIterator遍历</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-foreach循环遍历"><span class="toc-number">1.6.3.</span> <span class="toc-text">3.foreach循环遍历</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#七、LinkedList内部类"><span class="toc-number">1.7.</span> <span class="toc-text">七、LinkedList内部类</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-ListItr内部类"><span class="toc-number">1.7.1.</span> <span class="toc-text">1.ListItr内部类</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-Node内部类"><span class="toc-number">1.7.2.</span> <span class="toc-text">2.Node内部类</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-DescendingIterator降序迭代器"><span class="toc-number">1.7.3.</span> <span class="toc-text">3.DescendingIterator降序迭代器</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-LLSpliterator分割器"><span class="toc-number">1.7.4.</span> <span class="toc-text">4.LLSpliterator分割器</span></a></li></ol></li></ol></li></ol></div></div></div><div id="content-outer"><div id="top-container" style="background-image: url(https://uploadbeta.com/api/pictures/random)"><div id="post-info"><div id="post-title"><div class="posttitle">LinkedList源码解析</div></div><div id="post-meta"><time class="post-meta__date"><i class="fa fa-calendar" aria-hidden="true"></i> 发表于 2019-11-12<span class="post-meta__separator">|</span><i class="fa fa-history" aria-hidden="true"></i> 更新于 2020-02-01</time><span class="post-meta__separator mobile_hidden">|</span><span class="mobile_hidden"><i class="fa fa-inbox post-meta__icon" aria-hidden="true"></i><a class="post-meta__categories" href="/categories/01-Java%E5%9F%BA%E7%A1%80%E7%AF%87/">01-Java基础篇</a><i class="fa fa-angle-right" aria-hidden="true"></i><i class="fa fa-inbox post-meta__icon" aria-hidden="true"></i><a class="post-meta__categories" href="/categories/01-Java%E5%9F%BA%E7%A1%80%E7%AF%87/03-%E9%9B%86%E5%90%88%E8%A7%A3%E6%9E%90/">03-集合解析</a></span><div class="post-meta-wordcount"><i class="fa fa-eye post-meta__icon" aria-hidden="true">       </i><span>阅读量: </span><span id="busuanzi_value_page_pv"></span></div></div></div></div><div class="layout layout_post" id="content-inner">   <article id="post"><div class="article-container" id="post-content"><h1 id="LinkedList源码解析"><a href="#LinkedList源码解析" class="headerlink" title="LinkedList源码解析"></a>LinkedList源码解析</h1><h2 id="一、LinkedList数据结构"><a href="#一、LinkedList数据结构" class="headerlink" title="一、LinkedList数据结构"></a>一、LinkedList数据结构</h2><p><img alt="LinkList数据结构" data-src="https://github.com/ericql/RoadToJavaArchitecture/blob/master/source/img/Java%E5%9F%BA%E7%A1%80%E7%AF%87/02-JDK%E6%BA%90%E7%A0%81/LinkedList/LinkList%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84.png?raw=true" class="lazyload"><br>说明:如上如所示,LinkedList底层使用的双向链表结构,有一个头节点和尾节点,双向链意味着可以从头开始正向遍历,或者从尾开始逆向遍历,并且可以针对头部和尾部进行相应的操作<br>&emsp;&emsp;既然是双向链表,那么必定存在一种数据结构—我们称之为节点,节点实例保存业务数据,前一节点的位置信息和后一节点的位置信息<br><img alt="LinkList节点信息" data-src="https://github.com/ericql/RoadToJavaArchitecture/blob/master/source/img/Java%E5%9F%BA%E7%A1%80%E7%AF%87/02-JDK%E6%BA%90%E7%A0%81/LinkedList/LinkList%E8%8A%82%E7%82%B9%E4%BF%A1%E6%81%AF.png?raw=true" class="lazyload"></p>
<h2 id="二、LinkedList类定义"><a href="#二、LinkedList类定义" class="headerlink" title="二、LinkedList类定义"></a>二、LinkedList类定义</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">LinkedList</span>&lt;<span class="title">E</span>&gt;</span></span><br><span class="line"><span class="class">        <span class="keyword">extends</span> <span class="title">AbstractSequentialList</span>&lt;<span class="title">E</span>&gt;</span></span><br><span class="line"><span class="class">        <span class="keyword">implements</span> <span class="title">List</span>&lt;<span class="title">E</span>&gt;, <span class="title">Deque</span>&lt;<span class="title">E</span>&gt;, <span class="title">Cloneable</span>, <span class="title">java</span>.<span class="title">io</span>.<span class="title">Serializable</span></span></span><br></pre></td></tr></table></figure>
<ul>
<li>LinkedList是一个继承于AbstractSequentialList的双向链表,它也可以被当做堆栈、队列或双端队列进行操作</li>
<li>实现List接口,能对它进行队列操作,并允许包括null值</li>
<li>实现Deque接口,即能将LinkedList当作双端队列使用</li>
<li>实现了Cloneable接口,即覆盖了函数clone(),能克隆</li>
<li>实现了java.io.Serializable接口,意味着LinkedList支持序列化,能通过序列化去传输</li>
<li>LinkedList是非同步的</li>
</ul>
<h3 id="1-为什么要继承AbstractSequentialList"><a href="#1-为什么要继承AbstractSequentialList" class="headerlink" title="1.为什么要继承AbstractSequentialList"></a>1.为什么要继承AbstractSequentialList</h3><p>&emsp;&emsp;AbstractSequentialList实现了get(int index)、set(int index,E element)、add(int index,E element)和remove(int index)这些骨干性函数,降低了List的接口的复杂度,这些接口都是随机访问List的,既然它继承于AbstractSequentialList就相当于已经实现”get(int index)这些接口”<br>&emsp;&emsp;若需要通过AbstractSequentialList自己实现一个列表:只需要扩展此类,并提供listIterator()和size()方法的实现即可<br>&emsp;&emsp;若要实现不可修改的列表:则需要实现列表迭代器的hasNext、next、hasPrevious、previous和index方法即可</p>
<h3 id="2-LinkedList的类图关系"><a href="#2-LinkedList的类图关系" class="headerlink" title="2.LinkedList的类图关系"></a>2.LinkedList的类图关系</h3><p><img alt="LinkedList的类图关系" data-src="https://github.com/ericql/RoadToJavaArchitecture/blob/master/source/img/Java%E5%9F%BA%E7%A1%80%E7%AF%87/02-JDK%E6%BA%90%E7%A0%81/LinkedList/LinkedList%E7%9A%84%E7%B1%BB%E5%9B%BE%E5%85%B3%E7%B3%BB.png?raw=true" class="lazyload"></p>
<h3 id="3-不同步"><a href="#3-不同步" class="headerlink" title="3.不同步"></a>3.不同步</h3><p>&emsp;&emsp;LinkedList实现<font color="red">不是同步</font>的,如果多个线程同时访问一个LinkedList实例,而其中至少一个线程从结构上修改了列表,那么它必须保持外部同步<br>&emsp;&emsp;这通常是通过同步那些用来封装列表对象实现的.但是如果没有这样的对象,则该列表需要运用(Collections.synchronizedList)来进行”包装”,该方法最好是在创建列表对象时完成,为了避免对列表进行突发的非同步操作  </p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">List list = Collections.synchronizedList(<span class="keyword">new</span> LinkedList(...));</span><br></pre></td></tr></table></figure>
<p>&emsp;&emsp;类中的iterator()方法和listIterator()方法返回的iterators迭代器是<font color="red">fail-fast</font>的:当某一个线程A通过iterator去遍历某集合的过程中,若该集合的内容被其他线程所改变了;那么线程A访问集合时,就会抛出ConcurrentModificationException异常,产生fail-fast事件</p>
<h2 id="三、LinkedList属性"><a href="#三、LinkedList属性" class="headerlink" title="三、LinkedList属性"></a>三、LinkedList属性</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 容量</span></span><br><span class="line"><span class="keyword">transient</span> <span class="keyword">int</span> size = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 首节点</span></span><br><span class="line"><span class="comment"> * 不变的情况: (first == null &amp;&amp; last == null) ||</span></span><br><span class="line"><span class="comment"> *            (first.prev == null &amp;&amp; first.item != null)</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">transient</span> Node&lt;E&gt; first;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 尾节点</span></span><br><span class="line"><span class="comment"> * 不变的情况: (first == null &amp;&amp; last == null) ||</span></span><br><span class="line"><span class="comment"> *            (last.next == null &amp;&amp; last.item != null)</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">transient</span> Node&lt;E&gt; last;</span><br></pre></td></tr></table></figure>
<p>&emsp;&emsp;LinkedList的属性非常简单,一个头节点、一个尾节点、一个表示链表中实际元素个数的变量.</p>
<blockquote>
<p>注意:头节点、尾节点都有transient关键字修饰,这意味着序列化时该属性是不会序列化的</p>
</blockquote>
<h2 id="四、LinkedList构造函数"><a href="#四、LinkedList构造函数" class="headerlink" title="四、LinkedList构造函数"></a>四、LinkedList构造函数</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 默认构造</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="title">LinkedList</span><span class="params">()</span> </span>&#123;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 通过一个集合初始化LinkedList,元素的顺序由集合的迭代器返回顺序决定</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span>  c the collection whose elements are to be placed into this list</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@throws</span> NullPointerException if the specified collection is null</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="title">LinkedList</span><span class="params">(Collection&lt;? extends E&gt; c)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">this</span>();</span><br><span class="line">    addAll(c);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>注意:此处默认构造会形成空链表,即头节点的前一节点和后一节点均为null<br>在之前版本中则是将头节点的prev和next全部指向first实例,这样整个链表只有first一个节点,表示空的链表,执行完构造函数后first实例自身形成一个闭环,如图<br><img alt="构造空链表" data-src="https://github.com/ericql/RoadToJavaArchitecture/blob/master/source/img/Java%E5%9F%BA%E7%A1%80%E7%AF%87/02-JDK%E6%BA%90%E7%A0%81/LinkedList/%E6%9E%84%E9%80%A0%E7%A9%BA%E9%93%BE%E8%A1%A8.png?raw=true" class="lazyload"></p>
<h2 id="五、核心函数分析"><a href="#五、核心函数分析" class="headerlink" title="五、核心函数分析"></a>五、核心函数分析</h2><h3 id="1-添加元素"><a href="#1-添加元素" class="headerlink" title="1.添加元素"></a>1.添加元素</h3><p>LinkedList提供了头插入addFirst、尾插入addLast、add、addAll等方法</p>
<h4 id="1-1addFirst"><a href="#1-1addFirst" class="headerlink" title="1.1addFirst"></a>1.1addFirst</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 添加元素作为第一个元素</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> e the element to add</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">addFirst</span><span class="params">(E e)</span> </span>&#123;</span><br><span class="line">    linkFirst(e);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 内部方法:使用对应参数作为第一个节点元素</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">linkFirst</span><span class="params">(E e)</span> </span>&#123;</span><br><span class="line">    <span class="comment">// 得到首节点</span></span><br><span class="line">    <span class="keyword">final</span> Node&lt;E&gt; f = first;</span><br><span class="line">    <span class="comment">// 创建新节点</span></span><br><span class="line">    <span class="keyword">final</span> Node&lt;E&gt; newNode = <span class="keyword">new</span> Node&lt;&gt;(<span class="keyword">null</span>, e, f);</span><br><span class="line">    <span class="comment">// 设置新的首节点</span></span><br><span class="line">    first = newNode;</span><br><span class="line">    <span class="comment">// 如果之前的首节点为空(即size==0),则尾节点与首节点为同一个</span></span><br><span class="line">    <span class="comment">// 如果之前的首节点不为空,将之前的首节点的向前指向链接到新的首节点上</span></span><br><span class="line">    <span class="keyword">if</span> (f == <span class="keyword">null</span>) &#123;</span><br><span class="line">        last = newNode;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        f.prev = newNode;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// 长度+1</span></span><br><span class="line">    size++;</span><br><span class="line">    <span class="comment">// 修改次数 + 1</span></span><br><span class="line">    modCount++;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="1-2addLast"><a href="#1-2addLast" class="headerlink" title="1.2addLast"></a>1.2addLast</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 添加元素作为最后一个元素</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> e the element to add</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">addLast</span><span class="params">(E e)</span> </span>&#123;</span><br><span class="line">    linkLast(e);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 链接一个元素作为尾节点</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">linkLast</span><span class="params">(E e)</span> </span>&#123;</span><br><span class="line">    <span class="comment">// 得到尾节点</span></span><br><span class="line">    <span class="keyword">final</span> Node&lt;E&gt; l = last;</span><br><span class="line">    <span class="comment">// 新建节点元素</span></span><br><span class="line">    <span class="keyword">final</span> Node&lt;E&gt; newNode = <span class="keyword">new</span> Node&lt;&gt;(l, e, <span class="keyword">null</span>);</span><br><span class="line">    <span class="comment">// 设置新的尾节点</span></span><br><span class="line">    last = newNode;</span><br><span class="line">    <span class="comment">// 如果之前的尾节点为空(即size==0),则尾节点与首节点为同一个</span></span><br><span class="line">    <span class="comment">// 如果之前的尾节点不为空,将之前的尾节点的向后指向链接到新的尾节点上</span></span><br><span class="line">    <span class="keyword">if</span> (l == <span class="keyword">null</span>) &#123;</span><br><span class="line">        first = newNode;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        l.next = newNode;</span><br><span class="line">    &#125;</span><br><span class="line">    size++;</span><br><span class="line">    modCount++;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="1-3add"><a href="#1-3add" class="headerlink" title="1.3add"></a>1.3add</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 添加一个元素,默认添加到末尾作为最后一个元素</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> e element to be appended to this list</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span> &#123;<span class="doctag">@code</span> true&#125; (as specified by &#123;<span class="doctag">@link</span> Collection#add&#125;)</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">add</span><span class="params">(E e)</span> </span>&#123;</span><br><span class="line">    linkLast(e);</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 列表的指定位置插入指定的元素</span></span><br><span class="line"><span class="comment"> * - 当前位置如果有元素,则向右移动元素(对应索引加1),由linkBefore体现</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> index 待插入元素的索引</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> element 待插入元素</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@throws</span> IndexOutOfBoundsException &#123;<span class="doctag">@inheritDoc</span>&#125;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">add</span><span class="params">(<span class="keyword">int</span> index, E element)</span> </span>&#123;</span><br><span class="line">    checkPositionIndex(index);</span><br><span class="line">    <span class="comment">// 如果指定位置为最后,则添加到链表最后</span></span><br><span class="line">    <span class="comment">// 如果指定位置不是最后,则添加到指定元素前</span></span><br><span class="line">    <span class="keyword">if</span> (index == size) &#123;</span><br><span class="line">        linkLast(element);</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        linkBefore(element, node(index));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 在指定节点前插入节点,节点succ不能为空</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">linkBefore</span><span class="params">(E e, Node&lt;E&gt; succ)</span> </span>&#123;</span><br><span class="line">    <span class="comment">// assert succ != null;</span></span><br><span class="line">    <span class="comment">// 获取前一个节点</span></span><br><span class="line">    <span class="keyword">final</span> Node&lt;E&gt; pred = succ.prev;</span><br><span class="line">    <span class="comment">// 创建一个新的节点,向前指向pred(前一个节点),向后指向succ(当前节点)</span></span><br><span class="line">    <span class="keyword">final</span> Node&lt;E&gt; newNode = <span class="keyword">new</span> Node&lt;&gt;(pred, e, succ);</span><br><span class="line">    <span class="comment">// 在pred.next 和 succ.prev之间链接上新的节点</span></span><br><span class="line">    <span class="comment">// 如果succ当前节点的前一个节点为空,则新节点为首节点</span></span><br><span class="line">    succ.prev = newNode;</span><br><span class="line">    <span class="keyword">if</span> (pred == <span class="keyword">null</span>) &#123;</span><br><span class="line">        first = newNode;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        pred.next = newNode;</span><br><span class="line">    &#125;</span><br><span class="line">    size++;</span><br><span class="line">    modCount++;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>示例：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">List&lt;Integer&gt; lists = <span class="keyword">new</span> LinkedList&lt;Integer&gt;();</span><br><span class="line">lists.add(<span class="number">5</span>);</span><br><span class="line">lists.add(<span class="number">6</span>);</span><br></pre></td></tr></table></figure>
<p><img alt="add" data-src="https://github.com/ericql/RoadToJavaArchitecture/blob/master/source/img/Java%E5%9F%BA%E7%A1%80%E7%AF%87/02-JDK%E6%BA%90%E7%A0%81/LinkedList/add.png?raw=true" class="lazyload"></p>
<h4 id="1-4addAll"><a href="#1-4addAll" class="headerlink" title="1.4addAll"></a>1.4addAll</h4><p>&emsp;&emsp;addAll有两个重载函数,addAll(Collection&lt;? extends E&gt;)型和addAll(int, Collection&lt;? extends E&gt;)型,我们平时习惯调用的addAll(Collection&lt;? extends E&gt;)型会转化为addAll(int, Collection&lt;? extends E&gt;)型,所以我们着重分析此函数即可</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 从指定的位置插入指定集合的所有元素</span></span><br><span class="line"><span class="comment"> * - 如果当前位置有元素存在,将该位置的元素移动到右边</span></span><br><span class="line"><span class="comment"> * - 新的元素按照指定集合的迭代器顺序放置</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> index 插入第一个元素的索引</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> c collection containing elements to be added to this list</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span> &#123;<span class="doctag">@code</span> true&#125; if this list changed as a result of the call</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@throws</span> IndexOutOfBoundsException &#123;<span class="doctag">@inheritDoc</span>&#125;</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@throws</span> NullPointerException if the specified collection is null</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">addAll</span><span class="params">(<span class="keyword">int</span> index, Collection&lt;? extends E&gt; c)</span> </span>&#123;</span><br><span class="line">    <span class="comment">// 检查索引是否正确 (0&lt;=index&lt;=size)</span></span><br><span class="line">    checkPositionIndex(index);</span><br><span class="line">    <span class="comment">// 得到元素数组</span></span><br><span class="line">    Object[] a = c.toArray();</span><br><span class="line">    <span class="comment">// 新添加的元素个数</span></span><br><span class="line">    <span class="keyword">int</span> numNew = a.length;</span><br><span class="line">    <span class="comment">// 若没有元素添加则直接返回false</span></span><br><span class="line">    <span class="keyword">if</span> (numNew == <span class="number">0</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// 记录要插入的左右节点信息</span></span><br><span class="line">    Node&lt;E&gt; pred, succ;</span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">     * 如果插入位置为链表末尾</span></span><br><span class="line"><span class="comment">     * - 让当前元素前一节点链接原有的尾节点,后一节点链接null</span></span><br><span class="line"><span class="comment">     * 否则查找出指定位置的节点,在这节点之前链接上元素</span></span><br><span class="line"><span class="comment">     * - 前一节点为旧节点的前一节点,后一节点为旧节点</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">if</span> (index == size) &#123;</span><br><span class="line">        succ = <span class="keyword">null</span>;</span><br><span class="line">        pred = last;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        succ = node(index);</span><br><span class="line">        pred = succ.prev;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 遍历数组</span></span><br><span class="line">    <span class="keyword">for</span> (Object o : a) &#123;</span><br><span class="line">        <span class="meta">@SuppressWarnings</span>(<span class="string">"unchecked"</span>) E e = (E) o;</span><br><span class="line">        <span class="comment">// 生成新节点元素</span></span><br><span class="line">        Node&lt;E&gt; newNode = <span class="keyword">new</span> Node&lt;&gt;(pred, e, <span class="keyword">null</span>);</span><br><span class="line">        <span class="comment">// 插入位置的前一节点为null,新节点设置为首节点</span></span><br><span class="line">        <span class="comment">// 插入位置的前一节点不为null,前一节点的下一节点设置为新节点</span></span><br><span class="line">        <span class="keyword">if</span> (pred == <span class="keyword">null</span>) &#123;</span><br><span class="line">            first = newNode;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            pred.next = newNode;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// pred设置为新节点,即插入位置后移</span></span><br><span class="line">        pred = newNode;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 如果succ为null,即一直在最后位置添加,让前一个节点成为最后节点</span></span><br><span class="line">    <span class="comment">// 如果succ不为null,已经没有元素可以链接,则将pred和succ闭合起来</span></span><br><span class="line">    <span class="keyword">if</span> (succ == <span class="keyword">null</span>) &#123;</span><br><span class="line">        last = pred;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        pred.next = succ;</span><br><span class="line">        succ.prev = pred;</span><br><span class="line">    &#125;</span><br><span class="line">    size += numNew;</span><br><span class="line">    modCount++;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>示例：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">List&lt;Integer&gt; lists = <span class="keyword">new</span> LinkedList&lt;Integer&gt;();</span><br><span class="line">lists.add(<span class="number">5</span>);</span><br><span class="line">lists.addAll(<span class="number">0</span>, Arrays.asList(<span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>));</span><br></pre></td></tr></table></figure>
<p>上述代码内部的链表结构如下:<br><img alt="addAll" data-src="https://github.com/ericql/RoadToJavaArchitecture/blob/master/source/img/Java%E5%9F%BA%E7%A1%80%E7%AF%87/02-JDK%E6%BA%90%E7%A0%81/LinkedList/addAll.png?raw=true" class="lazyload"></p>
<h5 id="1-4-1对addAll函数的思考"><a href="#1-4-1对addAll函数的思考" class="headerlink" title="1.4.1对addAll函数的思考"></a>1.4.1对addAll函数的思考</h5><p>&emsp;&emsp;在addAll函数中,传入一个集合参数和插入位置,然后将集合转化为数组,然后在遍历数组,挨个添加数组元素,为什么要先转化为数组再进行遍历,而不是直接遍历集合?<br>从效果上两者是完全等价的,都可以达到遍历的效果  </p>
<ol>
<li>如果直接遍历集合的话,那么在遍历过程中需要插入元素,在堆上分配内存空间,修改指针域,这个过程就会一直占用着这个集合,考虑正确同步的话其他线程只能一直等到  </li>
<li>如果转化为数组,只需要遍历集合,而遍历集合过程中不需要额外的操作,所以占用时间相对是较短的,这样就利于其他线程尽快的使用这个集合,即有利于提高多线程访问该集合的效率,尽可能短时间的阻塞</li>
</ol>
<h3 id="2-删除元素"><a href="#2-删除元素" class="headerlink" title="2.删除元素"></a>2.删除元素</h3><p>LinkedList提供了<font color="red">头删除</font>removeFirst、了<font color="red">尾删除</font>removeLast、remove、clear等删除方法  </p>
<h4 id="2-1removeFirst"><a href="#2-1removeFirst" class="headerlink" title="2.1removeFirst"></a>2.1removeFirst</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 删除第一个元素并返回删除的元素</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span> the first element from this list</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@throws</span> NoSuchElementException if this list is empty</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> E <span class="title">removeFirst</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="comment">// 获取到首节点,判断首节点为空则抛出异常</span></span><br><span class="line">    <span class="keyword">final</span> Node&lt;E&gt; f = first;</span><br><span class="line">    <span class="keyword">if</span> (f == <span class="keyword">null</span>) &#123;</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> NoSuchElementException();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> unlinkFirst(f);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 内部方法:删除首节点并返回删除的前首节点的值</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">private</span> E <span class="title">unlinkFirst</span><span class="params">(Node&lt;E&gt; f)</span> </span>&#123;</span><br><span class="line">    <span class="comment">// assert f == first &amp;&amp; f != null;</span></span><br><span class="line">    <span class="comment">// 获取到首节点的值</span></span><br><span class="line">    <span class="keyword">final</span> E element = f.item;</span><br><span class="line">    <span class="comment">// 得到下一个节点</span></span><br><span class="line">    <span class="keyword">final</span> Node&lt;E&gt; next = f.next;</span><br><span class="line">    <span class="comment">// 便于垃圾回收清理</span></span><br><span class="line">    f.item = <span class="keyword">null</span>;</span><br><span class="line">    f.next = <span class="keyword">null</span>; <span class="comment">// help GC</span></span><br><span class="line">    <span class="comment">// 下一节点设置为首节点</span></span><br><span class="line">    first = next;</span><br><span class="line">    <span class="comment">// 如果不存在下一个节点:则首尾都为null(空表)</span></span><br><span class="line">    <span class="comment">// 如果存在下一节点:它的向前指向为null,</span></span><br><span class="line">    <span class="keyword">if</span> (next == <span class="keyword">null</span>) &#123;</span><br><span class="line">        last = <span class="keyword">null</span>;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        next.prev = <span class="keyword">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    size--;</span><br><span class="line">    modCount++;</span><br><span class="line">    <span class="keyword">return</span> element;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="2-2removeLast"><a href="#2-2removeLast" class="headerlink" title="2.2removeLast"></a>2.2removeLast</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 删除最后一个元素并返回删除的值</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span> the last element from this list</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@throws</span> NoSuchElementException if this list is empty</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> E <span class="title">removeLast</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="comment">// 获取尾节点,如果为空则抛出异常</span></span><br><span class="line">    <span class="keyword">final</span> Node&lt;E&gt; l = last;</span><br><span class="line">    <span class="keyword">if</span> (l == <span class="keyword">null</span>) &#123;</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> NoSuchElementException();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> unlinkLast(l);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 内部方法:删除尾节点并返回删除的前尾节点的值</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">private</span> E <span class="title">unlinkLast</span><span class="params">(Node&lt;E&gt; l)</span> </span>&#123;</span><br><span class="line">    <span class="comment">// assert l == last &amp;&amp; l != null;</span></span><br><span class="line">    <span class="comment">// 获取尾节点的值</span></span><br><span class="line">    <span class="keyword">final</span> E element = l.item;</span><br><span class="line">    <span class="comment">// 得出此尾节点的前一节点</span></span><br><span class="line">    <span class="keyword">final</span> Node&lt;E&gt; prev = l.prev;</span><br><span class="line">   <span class="comment">// 清空尾节点的值和 前一节点(隔断/孤立尾节点) 便于垃圾回收清理</span></span><br><span class="line">    l.item = <span class="keyword">null</span>;</span><br><span class="line">    l.prev = <span class="keyword">null</span>; <span class="comment">// help GC</span></span><br><span class="line">    <span class="comment">// 前一节点设置为尾节点</span></span><br><span class="line">    last = prev;</span><br><span class="line">    <span class="comment">// 如果不存在前一个节点:则首尾都为null(空表)</span></span><br><span class="line">    <span class="comment">// 如果存在前一个节点:则它的向后指向为null</span></span><br><span class="line">    <span class="keyword">if</span> (prev == <span class="keyword">null</span>) &#123;</span><br><span class="line">        first = <span class="keyword">null</span>;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        prev.next = <span class="keyword">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    size--;</span><br><span class="line">    modCount++;</span><br><span class="line">    <span class="keyword">return</span> element;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="2-3remove"><a href="#2-3remove" class="headerlink" title="2.3remove"></a>2.3remove</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 出队(从前端)</span></span><br><span class="line"><span class="comment"> * - 如果不存在会抛出异常而不是返回null,存在的话会返回值并移除这个元素(节点)</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span> the head of this list</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@throws</span> NoSuchElementException if this list is empty</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> E <span class="title">remove</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> removeFirst();</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 删除列表指定位置的元素</span></span><br><span class="line"><span class="comment"> * - 向左移动剩余子元素(对应索引减1)</span></span><br><span class="line"><span class="comment"> * - 返回列表上被移除的值</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> index 被移除元素的索引</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span> 指定位置之前的元素</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@throws</span> IndexOutOfBoundsException &#123;<span class="doctag">@inheritDoc</span>&#125;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> E <span class="title">remove</span><span class="params">(<span class="keyword">int</span> index)</span> </span>&#123;</span><br><span class="line">    checkElementIndex(index);</span><br><span class="line">    <span class="keyword">return</span> unlink(node(index));</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 删除指定节点并返回被删除的元素值</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function">E <span class="title">unlink</span><span class="params">(Node&lt;E&gt; x)</span> </span>&#123;</span><br><span class="line">    <span class="comment">// assert x != null;</span></span><br><span class="line">    <span class="comment">// 获取当前值和前后节点</span></span><br><span class="line">    <span class="keyword">final</span> E element = x.item;</span><br><span class="line">    <span class="keyword">final</span> Node&lt;E&gt; next = x.next;</span><br><span class="line">    <span class="keyword">final</span> Node&lt;E&gt; prev = x.prev;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 如果前一节点为null,即当前节点为首节点,让下一节点成为首节点</span></span><br><span class="line">    <span class="comment">// 如果前一节点不为null,断开当前节点的前一节点链接(下方断开后一节点链接)</span></span><br><span class="line">    <span class="keyword">if</span> (prev == <span class="keyword">null</span>) &#123;</span><br><span class="line">        first = next;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        prev.next = next;</span><br><span class="line">        x.prev = <span class="keyword">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 如果后一节点为null,即当前节点为尾节点,让前一节点成为尾节点</span></span><br><span class="line">    <span class="comment">// 如果后一节点不为null,断开当前节点的后一节点链接</span></span><br><span class="line">    <span class="keyword">if</span> (next == <span class="keyword">null</span>) &#123;</span><br><span class="line">        last = prev;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        next.prev = prev;</span><br><span class="line">        x.next = <span class="keyword">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 方便gc回收,当前的值置为null</span></span><br><span class="line">    x.item = <span class="keyword">null</span>;</span><br><span class="line">    size--;</span><br><span class="line">    modCount++;</span><br><span class="line">    <span class="keyword">return</span> element;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 删除指定元素</span></span><br><span class="line"><span class="comment"> * - 从first节点开始第一个出现的元素</span></span><br><span class="line"><span class="comment"> * - 如果列表中不包含此元素,就不改变</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> o element to be removed from this list, if present</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span> &#123;<span class="doctag">@code</span> true&#125; if this list contained the specified element</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">remove</span><span class="params">(Object o)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (o == <span class="keyword">null</span>) &#123;</span><br><span class="line">        <span class="keyword">for</span> (Node&lt;E&gt; x = first; x != <span class="keyword">null</span>; x = x.next) &#123;</span><br><span class="line">            <span class="keyword">if</span> (x.item == <span class="keyword">null</span>) &#123;</span><br><span class="line">                unlink(x);</span><br><span class="line">                <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">for</span> (Node&lt;E&gt; x = first; x != <span class="keyword">null</span>; x = x.next) &#123;</span><br><span class="line">            <span class="keyword">if</span> (o.equals(x.item)) &#123;</span><br><span class="line">                unlink(x);</span><br><span class="line">                <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="2-4clear"><a href="#2-4clear" class="headerlink" title="2.4clear"></a>2.4clear</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 清空表:方便gc回收</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">clear</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="comment">// Clearing all of the links between nodes is "unnecessary", but:</span></span><br><span class="line">    <span class="comment">// - helps a generational GC if the discarded nodes inhabit</span></span><br><span class="line">    <span class="comment">//   more than one generation</span></span><br><span class="line">    <span class="comment">// - is sure to free memory even if there is a reachable Iterator</span></span><br><span class="line">    <span class="keyword">for</span> (Node&lt;E&gt; x = first; x != <span class="keyword">null</span>; ) &#123;</span><br><span class="line">        Node&lt;E&gt; next = x.next;</span><br><span class="line">        x.item = <span class="keyword">null</span>;</span><br><span class="line">        x.next = <span class="keyword">null</span>;</span><br><span class="line">        x.prev = <span class="keyword">null</span>;</span><br><span class="line">        x = next;</span><br><span class="line">    &#125;</span><br><span class="line">    first = last = <span class="keyword">null</span>;</span><br><span class="line">    size = <span class="number">0</span>;</span><br><span class="line">    modCount++;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="3-修改元素"><a href="#3-修改元素" class="headerlink" title="3.修改元素"></a>3.修改元素</h3><p>LinkedList提供了set(int index, E element)方法来修改指定索引上的值</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 用指定位置的元素替换指定位置的元素</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> index 代替指定位置的元素</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> element 指定位置被存储的元素</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span> 指定位置之前的元素值</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@throws</span> IndexOutOfBoundsException &#123;<span class="doctag">@inheritDoc</span>&#125;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> E <span class="title">set</span><span class="params">(<span class="keyword">int</span> index, E element)</span> </span>&#123;</span><br><span class="line">    checkElementIndex(index);</span><br><span class="line">    Node&lt;E&gt; x = node(index);</span><br><span class="line">    E oldVal = x.item;</span><br><span class="line">    x.item = element;</span><br><span class="line">    <span class="keyword">return</span> oldVal;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="4-查找元素"><a href="#4-查找元素" class="headerlink" title="4.查找元素"></a>4.查找元素</h3><p>LinkedList提供了getFirst、getLast、get、contains、indexOf、lastIndexOf这些查找元素方法</p>
<h4 id="4-1getFirst"><a href="#4-1getFirst" class="headerlink" title="4.1getFirst"></a>4.1getFirst</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 获取第一个元素</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span> the first element in this list</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@throws</span> NoSuchElementException if this list is empty</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> E <span class="title">getFirst</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="comment">// 获取到首节点,判断首节点为空则抛出异常</span></span><br><span class="line">    <span class="keyword">final</span> Node&lt;E&gt; f = first;</span><br><span class="line">    <span class="keyword">if</span> (f == <span class="keyword">null</span>) &#123;</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> NoSuchElementException();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> f.item;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="4-2getLast"><a href="#4-2getLast" class="headerlink" title="4.2getLast"></a>4.2getLast</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 获取最后一个元素</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span> the last element in this list</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@throws</span> NoSuchElementException if this list is empty</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> E <span class="title">getLast</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="comment">// 获取尾节点,如果为空则抛出异常</span></span><br><span class="line">    <span class="keyword">final</span> Node&lt;E&gt; l = last;</span><br><span class="line">    <span class="keyword">if</span> (l == <span class="keyword">null</span>) &#123;</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> NoSuchElementException();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> l.item;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="4-3get"><a href="#4-3get" class="headerlink" title="4.3get"></a>4.3get</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 获取指定索引的节点值</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> index index of the element to return</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span> the element at the specified position in this list</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@throws</span> IndexOutOfBoundsException &#123;<span class="doctag">@inheritDoc</span>&#125;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> E <span class="title">get</span><span class="params">(<span class="keyword">int</span> index)</span> </span>&#123;</span><br><span class="line">    <span class="comment">// 检查元素索引:0&lt;=index&lt;=size</span></span><br><span class="line">    checkElementIndex(index);</span><br><span class="line">    <span class="keyword">return</span> node(index).item;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="4-4contains"><a href="#4-4contains" class="headerlink" title="4.4contains"></a>4.4contains</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 检查是否包含某个元素</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> o element whose presence in this list is to be tested</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span> &#123;<span class="doctag">@code</span> true&#125; if this list contains the specified element</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">contains</span><span class="params">(Object o)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> indexOf(o) != -<span class="number">1</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="4-5indexOf"><a href="#4-5indexOf" class="headerlink" title="4.5indexOf"></a>4.5indexOf</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 获取指定元素第一次出现的索引,不存在就返回-1</span></span><br><span class="line"><span class="comment"> * - 不能二分查找了,所以通常根据索引获得元素的速度比下方通过元素获得索引的速度快</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> o 待索引的元素</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">indexOf</span><span class="params">(Object o)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> index = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">if</span> (o == <span class="keyword">null</span>) &#123;</span><br><span class="line">        <span class="keyword">for</span> (Node&lt;E&gt; x = first; x != <span class="keyword">null</span>; x = x.next) &#123;</span><br><span class="line">            <span class="keyword">if</span> (x.item == <span class="keyword">null</span>) &#123;</span><br><span class="line">                <span class="keyword">return</span> index;</span><br><span class="line">            &#125;</span><br><span class="line">            index++;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">for</span> (Node&lt;E&gt; x = first; x != <span class="keyword">null</span>; x = x.next) &#123;</span><br><span class="line">            <span class="keyword">if</span> (o.equals(x.item)) &#123;</span><br><span class="line">                <span class="keyword">return</span> index;</span><br><span class="line">            &#125;</span><br><span class="line">            index++;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> -<span class="number">1</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="4-6lastIndexOf"><a href="#4-6lastIndexOf" class="headerlink" title="4.6lastIndexOf"></a>4.6lastIndexOf</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 获取指定元素从last开始第一次出现的索引,不存在就返回-1</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> o 待索引的元素</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">lastIndexOf</span><span class="params">(Object o)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> index = size;</span><br><span class="line">    <span class="keyword">if</span> (o == <span class="keyword">null</span>) &#123;</span><br><span class="line">        <span class="keyword">for</span> (Node&lt;E&gt; x = last; x != <span class="keyword">null</span>; x = x.prev) &#123;</span><br><span class="line">            index--;</span><br><span class="line">            <span class="keyword">if</span> (x.item == <span class="keyword">null</span>) &#123;</span><br><span class="line">                <span class="keyword">return</span> index;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">for</span> (Node&lt;E&gt; x = last; x != <span class="keyword">null</span>; x = x.prev) &#123;</span><br><span class="line">            index--;</span><br><span class="line">            <span class="keyword">if</span> (o.equals(x.item)) &#123;</span><br><span class="line">                <span class="keyword">return</span> index;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> -<span class="number">1</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="5-node随机访问函数"><a href="#5-node随机访问函数" class="headerlink" title="5.node随机访问函数"></a>5.node随机访问函数</h3><p>&emsp;&emsp;由LinkedList的类结构可以看出,LinkedList是AbstractSequentialList的子类.AbstractSequentialList 实现了get(int index)、set(int index, E element)、add(int index, E element)和remove(int index)这些随机访问的函数,那么LinkedList也实现了这些随机访问的接口.LinkedList具体是如何实现随机访问的?即具体是如何定义index这个参数的?</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 返回指定索引的节点</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function">Node&lt;E&gt; <span class="title">node</span><span class="params">(<span class="keyword">int</span> index)</span> </span>&#123;</span><br><span class="line">    <span class="comment">// assert isElementIndex(index);</span></span><br><span class="line">    <span class="comment">// 先来一次二分,减少遍历查找的次数</span></span><br><span class="line">    <span class="keyword">if</span> (index &lt; (size &gt;&gt; <span class="number">1</span>)) &#123;</span><br><span class="line">        <span class="comment">// index==0时不会循环,直接返回first 下方同理</span></span><br><span class="line">        Node&lt;E&gt; x = first;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; index; i++) &#123;</span><br><span class="line">            x = x.next;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> x;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        Node&lt;E&gt; x = last;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = size - <span class="number">1</span>; i &gt; index; i--) &#123;</span><br><span class="line">            x = x.prev;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> x;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>&emsp;&emsp;该方法返回双向链表中指定位置处的节点,而链表中是没有下标索引的,要指定位置出的元素,就要遍历该链表,从源码的实现中:我们看到这里有一个加速动作.源码中先将index与长度size的一半比较,如果index&lt;size/2,就只从位置0往后遍历到位置index处,而如果 index&gt;size/2，就只从位置size往前遍历到位置index处.这样可以减少一部分不必要的遍历</p>
<h3 id="6-其他public方法"><a href="#6-其他public方法" class="headerlink" title="6.其他public方法"></a>6.其他public方法</h3><p>clone、toArray、toArray(T[] a)<br>以及支持序列化写入函数writeObject(java.io.ObjectOutputStream s)和读取函数readObject(java.io.ObjectInputStream s)<br>—具体见源码全解析</p>
<h3 id="7-Queue队列操作"><a href="#7-Queue队列操作" class="headerlink" title="7.Queue队列操作"></a>7.Queue队列操作</h3><p>Queue操作提供了peek、element、poll、remove、offer这些方法</p>
<h4 id="7-1peek"><a href="#7-1peek" class="headerlink" title="7.1peek"></a>7.1peek</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 出队(从前端)获得第一个元素,不存在返回null,不会删除元素(节点)</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span> 头部元素没有则返回null</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> E <span class="title">peek</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">final</span> Node&lt;E&gt; f = first;</span><br><span class="line">    <span class="keyword">return</span> (f == <span class="keyword">null</span>) ? <span class="keyword">null</span> : f.item;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="7-2element"><a href="#7-2element" class="headerlink" title="7.2element"></a>7.2element</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 出队(从前端)获取第一个元素,若为null抛出异常而不是返回null</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span> the head of this list</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@throws</span> NoSuchElementException if this list is empty</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> E <span class="title">element</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> getFirst();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="7-3poll"><a href="#7-3poll" class="headerlink" title="7.3poll"></a>7.3poll</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 出队(从前端)</span></span><br><span class="line"><span class="comment"> * - 如果不存在返回null,存在的话会返回值并删除这个元素(节点)</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> E <span class="title">poll</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">final</span> Node&lt;E&gt; f = first;</span><br><span class="line">    <span class="keyword">return</span> (f == <span class="keyword">null</span>) ? <span class="keyword">null</span> : unlinkFirst(f);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="7-4remove"><a href="#7-4remove" class="headerlink" title="7.4remove"></a>7.4remove</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 出队(从前端)</span></span><br><span class="line"><span class="comment"> * - 如果不存在会抛出异常而不是返回null,存在的话会返回值并移除这个元素(节点)</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span> the head of this list</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@throws</span> NoSuchElementException if this list is empty</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> E <span class="title">remove</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> removeFirst();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="7-5offer"><a href="#7-5offer" class="headerlink" title="7.5offer"></a>7.5offer</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 入队(从后端)</span></span><br><span class="line"><span class="comment"> * - 始终返回true</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> e the element to add</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">offer</span><span class="params">(E e)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> add(e);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="8-Deque双端队列操作"><a href="#8-Deque双端队列操作" class="headerlink" title="8.Deque双端队列操作"></a>8.Deque双端队列操作</h3><p>Deque操作提供了offerFirst(E e)、offerLast(E e)、peekFirst()、peekLast()、pollFirst()、pollLast()</p>
<h3 id="9-栈操作"><a href="#9-栈操作" class="headerlink" title="9.栈操作"></a>9.栈操作</h3><p>push(E e)、pop()、removeFirstOccurrence、removeLastOccurrence(Object o)这些方法</p>
<h2 id="六、LinkedList的遍历"><a href="#六、LinkedList的遍历" class="headerlink" title="六、LinkedList的遍历"></a>六、LinkedList的遍历</h2><h3 id="1-迭代器Iterator遍历"><a href="#1-迭代器Iterator遍历" class="headerlink" title="1.迭代器Iterator遍历"></a>1.迭代器Iterator遍历</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Iterator iter = list.iterator();</span><br><span class="line"><span class="keyword">while</span> (iter.hasNext()) &#123;</span><br><span class="line">    System.out.println(iter.next());</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="2-迭代器ListIterator遍历"><a href="#2-迭代器ListIterator遍历" class="headerlink" title="2.迭代器ListIterator遍历"></a>2.迭代器ListIterator遍历</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">ListIterator&lt;String&gt; lIter = list.listIterator();</span><br><span class="line"><span class="comment">//顺向遍历</span></span><br><span class="line"><span class="keyword">while</span>(lIter.hasNext()) &#123;</span><br><span class="line">　　System.out.println(lIter.next());</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//逆向遍历</span></span><br><span class="line"><span class="keyword">while</span>(lIter.hasPrevious()) &#123;</span><br><span class="line">　　System.out.println(lIter.previous());</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="3-foreach循环遍历"><a href="#3-foreach循环遍历" class="headerlink" title="3.foreach循环遍历"></a>3.foreach循环遍历</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span>(String str:list) &#123;</span><br><span class="line">    System.out.println(str);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="七、LinkedList内部类"><a href="#七、LinkedList内部类" class="headerlink" title="七、LinkedList内部类"></a>七、LinkedList内部类</h2><h3 id="1-ListItr内部类"><a href="#1-ListItr内部类" class="headerlink" title="1.ListItr内部类"></a>1.ListItr内部类</h3><p>列表迭代器内部实现了hasNext、next、hasPrevious、previous、nextIndex、previousIndex、remove、set、add、forEachRemaining、checkForComodification等方法</p>
<h3 id="2-Node内部类"><a href="#2-Node内部类" class="headerlink" title="2.Node内部类"></a>2.Node内部类</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">Node</span>&lt;<span class="title">E</span>&gt; </span>&#123;</span><br><span class="line">    <span class="comment">// 存放业务数据</span></span><br><span class="line">    E item;</span><br><span class="line">    <span class="comment">// 前节点的信息(通常称之为前后节点的指针)</span></span><br><span class="line">    Node&lt;E&gt; next;</span><br><span class="line">    <span class="comment">// 后节点的信息</span></span><br><span class="line">    Node&lt;E&gt; prev;</span><br><span class="line"></span><br><span class="line">    Node(Node&lt;E&gt; prev, E element, Node&lt;E&gt; next) &#123;</span><br><span class="line">        <span class="keyword">this</span>.item = element;</span><br><span class="line">        <span class="keyword">this</span>.next = next;</span><br><span class="line">        <span class="keyword">this</span>.prev = prev;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>内部类Node就是实际的节点,用于存放实际元素的地方</p>
<h3 id="3-DescendingIterator降序迭代器"><a href="#3-DescendingIterator降序迭代器" class="headerlink" title="3.DescendingIterator降序迭代器"></a>3.DescendingIterator降序迭代器</h3><p>实现了hasNext、next、remove等方法</p>
<h3 id="4-LLSpliterator分割器"><a href="#4-LLSpliterator分割器" class="headerlink" title="4.LLSpliterator分割器"></a>4.LLSpliterator分割器</h3></div></article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">文章作者: </span><span class="post-copyright-info"><a href="mailto:undefined" target="_blank" rel="noopener">Eric Liang</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">文章链接: </span><span class="post-copyright-info"><a href="https://ericql.github.io/2019/11/12/01-Java%E5%9F%BA%E7%A1%80%E7%AF%87/03-%E9%9B%86%E5%90%88%E7%AF%87/LinkedList%E6%BA%90%E7%A0%81%E8%A7%A3%E6%9E%90/">https://ericql.github.io/2019/11/12/01-Java%E5%9F%BA%E7%A1%80%E7%AF%87/03-%E9%9B%86%E5%90%88%E7%AF%87/LinkedList%E6%BA%90%E7%A0%81%E8%A7%A3%E6%9E%90/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank" rel="noopener">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="https://ericql.github.io">Eric Liang</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/%E9%9B%86%E5%90%88/">集合    </a><a class="post-meta__tags" href="/tags/LinkedList/">LinkedList    </a></div><div class="post_share"><div class="social-share" data-image="https://source.unsplash.com/300x300/?document" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/social-share.js@1.0.16/dist/css/share.min.css"><script src="https://cdn.jsdelivr.net/npm/social-share.js@1.0.16/dist/js/social-share.min.js"></script></div></div><div class="post-reward"><a class="reward-button"><i class="fa fa-qrcode"></i> 打赏<div class="reward-main"><ul class="reward-all"><li class="reward-item"><img class="lazyload post-qr-code__img" src="/img/wechat.jpg"><div class="post-qr-code__desc">微信</div></li><li class="reward-item"><img class="lazyload post-qr-code__img" src="/img/alipay.jpg"><div class="post-qr-code__desc">支付宝</div></li></ul></div></a></div><nav class="pagination_post" id="pagination"><div class="prev-post pull_left"><a href="/2019/11/12/01-Java%E5%9F%BA%E7%A1%80%E7%AF%87/01-%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86%E7%82%B9/ThreadLocal/ThreadLocal%E7%A4%BA%E4%BE%8B%E4%B8%8E%E5%8E%9F%E7%90%86/"><img class="prev_cover lazyload" data-src="https://source.unsplash.com/300x300/?thread" onerror="onerror=null;src='/img/404.jpg'"><div class="label">上一篇</div><div class="prev_info"><span>ThreadLocal示例与原理</span></div></a></div><div class="next-post pull_right"><a href="/2019/11/12/01-Java%E5%9F%BA%E7%A1%80%E7%AF%87/03-%E9%9B%86%E5%90%88%E7%AF%87/TreeMap%E6%BA%90%E7%A0%81%E8%A7%A3%E6%9E%90/"><img class="next_cover lazyload" data-src="https://source.unsplash.com/300x300/?github" onerror="onerror=null;src='/img/404.jpg'"><div class="label">下一篇</div><div class="next_info"><span>TreeMap源码解析</span></div></a></div></nav><div class="relatedPosts"><div class="relatedPosts_headline"><i class="fa fa-fw fa-thumbs-up" aria-hidden="true"></i><span> 相关推荐</span></div><div class="relatedPosts_list"><div class="relatedPosts_item"><a href="/2019/11/12/01-Java基础篇/03-集合篇/Fail-Fast机制/" title="fail-fast机制"><img class="relatedPosts_cover lazyload"data-src="https://source.unsplash.com/300x300/?fail"><div class="relatedPosts_title">fail-fast机制</div></a></div><div class="relatedPosts_item"><a href="/2019/11/12/01-Java基础篇/03-集合篇/集合工具类/" title="集合工具类"><img class="relatedPosts_cover lazyload"data-src="https://source.unsplash.com/300x300/?collect"><div class="relatedPosts_title">集合工具类</div></a></div><div class="relatedPosts_item"><a href="/2019/11/12/01-Java基础篇/03-集合篇/TreeMap源码解析/" title="TreeMap源码解析"><img class="relatedPosts_cover lazyload"data-src="https://source.unsplash.com/300x300/?github"><div class="relatedPosts_title">TreeMap源码解析</div></a></div><div class="relatedPosts_item"><a href="/2019/11/12/01-Java基础篇/03-集合篇/HashMap源码解析/" title="HashMap源码解析"><img class="relatedPosts_cover lazyload"data-src="https://source.unsplash.com/300x300/?program"><div class="relatedPosts_title">HashMap源码解析</div></a></div><div class="relatedPosts_item"><a href="/2019/11/12/01-Java基础篇/03-集合篇/ArrayList源码解析/" title="ArrayList源码解析"><img class="relatedPosts_cover lazyload"data-src="https://source.unsplash.com/300x300/?book"><div class="relatedPosts_title">ArrayList源码解析</div></a></div></div><div class="clear_both"></div></div></div></div><footer id="footer" data-type="color"><div id="footer-wrap"><div class="copyright">&copy;2018 - 2020 By Eric Liang</div><div class="framework-info"><span>驱动 </span><a href="http://hexo.io" target="_blank" rel="noopener"><span>Hexo</span></a><span class="footer-separator">|</span><span>主题 </span><a href="https://github.com/jerryc127/hexo-theme-butterfly" target="_blank" rel="noopener"><span>Butterfly</span></a></div><div class="footer_custom_text"><a href="https://ericql.github.io">欢饮来到Eric的博客</a></div></div></footer></div><section class="rightside" id="rightside"><div id="rightside-config-hide"><i class="fa fa-book" id="readmode" title="阅读模式"></i><i class="fa fa-plus" id="font_plus" title="放大字体"></i><i class="fa fa-minus" id="font_minus" title="缩小字体"></i><a class="translate_chn_to_cht" id="translateLink" href="javascript:translatePage();" title="简繁转换" target="_self">繁</a><i class="darkmode fa fa-moon-o" id="darkmode" title="夜间模式"></i></div><div id="rightside-config-show"><div id="rightside_config" title="设置"><i class="fa fa-cog" aria-hidden="true"></i></div><i class="fa fa-list-ul close" id="mobile-toc-button" title="目录" aria-hidden="true"></i><i class="fa fa-arrow-up" id="go-up" title="回到顶部" aria-hidden="true"></i></div></section><script src="https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js"></script><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.js"></script><script src="/js/tw_cn.js"></script><script>translateInitilization()
</script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script src="https://cdn.jsdelivr.net/npm/instant.page@latest/instantpage.min.js" type="module"></script><script src="https://cdn.jsdelivr.net/npm/lazysizes@latest/lazysizes.min.js" async=""></script></body></html>